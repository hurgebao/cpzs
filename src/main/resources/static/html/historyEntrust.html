<!DOCTYPE html>
<!-- 加载easyUI中的js和css -->
<link rel="stylesheet" type="text/css" href="../js/jquery-easyui-1.5.2/themes/default/easyui.css">
<link rel="stylesheet" type="text/css" href="../js/jquery-easyui-1.5.2/themes/icon.css">
<link rel="stylesheet" type="text/css" href="../js/jquery-easyui-1.5.2/demo/demo.css">
<link rel="stylesheet" type="text/css" href="../css/common.css">

<script type="text/javascript" src="../js/jquery-easyui-1.5.2/jquery.min.js"></script>
<script type="text/javascript" src="../js/jquery-easyui-1.5.2/jquery.easyui.min.js"></script>
<script type="text/javascript" src="../js/jquery-easyui-1.5.2/locale/easyui-lang-zh_CN.js"></script>

<!-- 扩展验证 -->
<script type="text/javascript" src="../js/common/easyuiValidate.js"></script>

<!-- 公共的js -->
<script type="text/javascript" src="../js/common/acl.js"></script>

<script type="text/javascript" src="../js/common/format.js"></script>
<script type="text/javascript" src="../js/common/export.js"></script>
<script type="text/javascript" src="../js/common/dict.js"></script>
<!-- 测试结果信息列表-->
<table id="datagrid_data" border="0" cellpadding="0" cellspacing="0" width="100%" height="1000px">
	<thead id="datagrid_data1">
		<tr align="center"></tr>
	</thead>
</table>
<script type="text/javascript">
	$(function(){
		re_search();
	})
	function re_search() {
		$('#datagrid_data').datagrid({
			url:  '/selectTodayEntrust',
	        singleSelect: true,
	        striped : true,
	        fitColumns : false,
	        border : false,
	        showFooter: false,
	        idField : 'id',
	        rownumbers : true,
	        pagination : true,
	        pageSize : 50,
			pageList:[50,100,150,200,300],
	        pagePosition : 'bottom',
	        rowStyler:function(index,row){  //没有对账的   设置字体颜色
	    		if (row.test_status != 0){
	    			return 'color:#FF0000;';
	    		} 
	    	},
	    	//自适应列
	        columns : [ [
	        	{title : '测试时间', field : 'testTime', align: 'center', width : 150, formatter : function(value,row,index){
	        		if(value != null) {
	        			return new Date(value).Format("yyyy-MM-dd hh:mm:ss"); 
	        		}
	        		return ''; }},
	        	{title : '系统', field : 'systemBelong', align: 'center', width : 50,formatter : formatSystem_},
	        	{title : '资金池', field : 'fundPoolCode', align: 'center', width : 50},
	        	{title : '券商名称', field : 'secTraderName', align: 'center', width : 80},
	        	{title : '证券账户名称', field : 'securitiesAccountName', align: 'center', width : 80},
	            {title : '证券账户', field : 'securitiesAccountNo', align: 'center', width : 80},
	            {title : '交易类型', field : 'tradeType', align: 'center', width : 60,formatter : formatTrade_},
	            {title : '测试结果', field : 'testStatus', align: 'center', width : 60,formatter : formatTstRslt_},
	            {title : '测试信息', field : 'errorMessage', align: 'center', width : 150},
	            {title : '测试人员', field : 'username', align: 'center', width : 60},
	            {title : '请求地址', field : 'requestUrl', align: 'center', width : 150},
	            {title : '请求信息', field : 'requestData', align: 'center', width : 150},
	            {title : '返回信息', field : 'responseData', align: 'center', width : 150},
	            {title : '校验信息', field : 'checkMessage', align: 'center', width : 150}
	            ]]
		});
	}
	function formatSystem_(val,row,index) {
		if(val == 0) {
			return 'T1';
		} else if(val == 1) {
			return 'T0';
		} else {
			return '越大';
		}
		return val;
	}
	function formatTrade_(val,row,index) {
		if(val == 1) {
			return '普通买入';
		} else if(val == 2) {
			return '普通卖出';
		} else if(val == 3) {
			return '融资买入';
		} else if(val == 4) {
			return '卖券还款';
		} else if(val == 5) {
			return '撤单';
		} else if(val == 6) {
			return '查询资金';
		} else if(val == 7) {
			return '查询持仓';
		} else if(val == 8) {
			return '当日委托';
		} else if(val == 9) {
			return '当日成交';
		} else if(val == 13) {
			return '信用资产';
		}
		return val;
	}
	function formatTstRslt_(val,row,index) {
		if(val == null) {
			return '';
		}
		if(val == 0) {
			return '测试通过';
		} else {
			return '测试失败';
		}
	}
</script>